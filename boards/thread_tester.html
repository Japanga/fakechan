<!DOCTYPE html>
<html>
<head>
    <title>Cloudinary Image Uploader</title>
    <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
    <style>
        #image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        #image-grid img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Upload Images to Cloudinary</h1>
    <button id="upload_widget" class="cloudinary-button">Upload files</button>
    <div id="image-grid"></div>

    <script type="text/javascript">
        const cloudName = "dussuas34"; // Replace with your Cloudinary cloud name
        const uploadPreset = "threadTester"; // Replace with your upload preset

        const myWidget = cloudinary.createUploadWidget(
            {
                cloudName: cloudName,
                uploadPreset: uploadPreset
            },
            (error, result) => {
                if (!error && result && result.event === "success") {
                    console.log("Done! Here is the image info:", result.info);
                    addImageToGrid(result.info.secure_url);
                }
            }
        );

        document.getElementById("upload_widget").addEventListener("click", function(){
            myWidget.open();
        }, false);

        function addImageToGrid(imageUrl) {
            const imageGrid = document.getElementById("image-grid");
            const imgElement = document.createElement("img");
            imgElement.src = imageUrl;
            imageGrid.appendChild(imgElement);
        }
    </script>
</body>
</html>
