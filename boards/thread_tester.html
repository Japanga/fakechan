<!DOCTYPE html>
<html>
<head>
    <title>Cloudinary Uploader</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Upload & View Images</h1>
    <button id="upload_widget">Upload Image</button>
    <div id="image-grid"></div>

  
  <style>
    body { font-family: sans-serif; }
#image-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 10px;
    margin-top: 20px;
}
.grid-image {
    width: 100%;
    height: 150px;
    object-fit: cover;
    cursor: pointer;
    border: 1px solid #ccc;
    transition: transform 0.2s;
}
.grid-image:hover {
    transform: scale(1.05);
}
    </style>
    <!-- Cloudinary Upload Widget Script -->
    <script src="upload-widget.cloudinary.com" type="text/javascript"></script>
    <script>
      // Replace with your actual cloud name and preset
const cloudName = "dussuas34"; // e.g., "demodemo"
const uploadPreset = "threadTester";
const imageGrid = document.getElementById('image-grid');
let uploadedImageUrls = []; // Store URLs for the grid

// --- Cloudinary Widget Setup ---
var myWidget = cloudinary.createUploadWidget({
    cloudName: cloudName,
    uploadPreset: uploadPreset,
}, (error, result) => {
    if (!error && result.event === 'success') {
        console.log('Done! Here is the image URL:', result.info.secure_url);
        const imageUrl = result.info.secure_url;
        uploadedImageUrls.push(imageUrl);
        renderImageGrid(); // Re-render the grid with the new image
    }
});

document.getElementById("upload_widget").addEventListener("click", function() {
    myWidget.open();
}, false);

// --- Grid Rendering & Click Handlers ---
function renderImageGrid() {
    imageGrid.innerHTML = ''; // Clear existing grid
    uploadedImageUrls.forEach(url => {
        const img = document.createElement('img');
        img.src = url;
        img.alt = 'Uploaded Image';
        img.classList.add('grid-image');
        // Add click event to open a new page with a larger view
        img.addEventListener('click', () => {
            // Open a new tab/window with the image URL
            window.open(url, '_blank'); 
            // Or navigate the current page: window.location.href = url;
        });
        imageGrid.appendChild(img);
    });
}

// Initial render (if any pre-loaded images)
renderImageGrid();
    </script>
</body>
</html>
