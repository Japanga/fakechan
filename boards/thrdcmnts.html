<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Comments Section</title>
    <style>
        .comment {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }
        .comment-header {
            font-size: 0.8em;
            color: #666;
        }
        .comment-text {
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <h1>Comments Section</h1>
    
    <form id="comment-form">
        <textarea id="comment-input" placeholder="Add a comment..." rows="4" required></textarea><br>
        <button type="submit">Post Comment</button>
    </form>

    <div id="comments-container">
        <!-- Comments will be dynamically inserted here -->
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
    const commentForm = document.getElementById('comment-form');
    const commentInput = document.getElementById('comment-input');
    const commentsContainer = document.getElementById('comments-container');
    const STORAGE_KEY = 'frontend_comments';

    // Function to retrieve comments from localStorage
    function getComments() {
        const commentsString = localStorage.getItem(STORAGE_KEY);
        return commentsString ? JSON.parse(commentsString) : [];
    }

    // Function to save comments to localStorage
    function saveComments(comments) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(comments));
    }

    // Function to render a single comment
    function renderComment(comment) {
        const commentDiv = document.createElement('div');
        commentDiv.classList.add('comment');
        commentDiv.setAttribute('data-id', comment.id);

        const headerDiv = document.createElement('div');
        headerDiv.classList.add('comment-header');
        headerDiv.textContent = `Posted on: ${new Date(comment.date).toLocaleString()}`;

        const textDiv = document.createElement('div');
        textDiv.classList.add('comment-text');
        textDiv.textContent = comment.text;

        commentDiv.appendChild(headerDiv);
        commentDiv.appendChild(textDiv);
        commentsContainer.prepend(commentDiv); // Add new comments to the top
    }

    // Function to render all stored comments on page load
    function loadComments() {
        const comments = getComments();
        comments.sort((a, b) => new Date(b.date) - new Date(a.date)); // Sort by date descending
        comments.forEach(renderComment);
    }

    // Event listener for form submission
    commentForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const commentText = commentInput.value.trim();

        if (commentText !== '') {
            const newComment = { 
                id: Date.now(), // Use timestamp as a simple unique ID
                text: commentText,
                date: new Date().toISOString(),
            };

            const comments = getComments();
            comments.push(newComment);
            saveComments(comments);
            renderComment(newComment);
            commentInput.value = ''; // Clear the input field
        }
    });

    // Initial load
    loadComments();
});
  </script>
</body>
</html>
